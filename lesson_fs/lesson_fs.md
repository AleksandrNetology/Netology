### Файловые системы

![](https://upload.wikimedia.org/wikipedia/commons/f/fb/The_Linux_Storage_Stack_Diagram.svg)

На картинке, всё, что находится выше Applications (process) и включая - это user space.
Всё что ниже - kernel space.

Стрелочки, подписанные `read(2)`, `write(2)`, `stat` и т.д. это системные вызовы, инфу по ним можно посмотреть во 2-м разделе `man`.

Из схемы видно, что приложения взаимодействуют с VFS - это такая подсистема ядра, которая реализует интерфейс взаимодействия пользовательских
приложений с различными файловыми системами. Более того, она позволяет добавлять поддержку новых FS в ядро.

Linux поддерживает порядка 50 файловых систем.

На картинке:\
- Block-based FS - эти FS используют блочные устройства для хранения данных;
- Network FS - сетевые FS, т.е. с ними мы работаем, как с фалами, но все наши вызовы транслируются по сети на удалённые хранилища;
- Pseudo FS - это, например, /proc, которая FS не является, там данные не хранятся, там реализован интерфейс доступа к данным из ядра;
- Special purpuse - эти FS тоже не используют внешние носители, а хранят все данные в памяти;


### Объекты файловой системы

#### `man 2 stat, /stat \{`
Посмотрим на системный вызов `stat`, который мы видели на схеме. Он используется для получения данных о файле.
Информацию о нём можно посмотреть в man: `man 2 stat`.

> `sudo apt-get install manpages-dev` - установка полной версии `man`, включая 2-й раздел.

Так же есть одноимённая утилита `stat`, которая использует этот вызов и выводит в консоль те же данные, но в читаемом виде.
Эта утилита входит в пакет [GNU Core Utilities](https://ru.wikipedia.org/wiki/GNU_Coreutils) и установлена в ОС по умолчанию.
Привер:
```sh
vagrant@vagrant:~$ stat /etc/hosts
  File: /etc/hosts
  Size: 222             Blocks: 8          IO Block: 4096   regular file
Device: fd00h/64768d    Inode: 262844      Links: 1
Access: (0644/-rw-r--r--)  Uid: (    0/    root)   Gid: (    0/    root)
Access: 2022-03-16 14:13:47.340703817 +0000
Modify: 2021-12-19 19:39:18.555684984 +0000
Change: 2021-12-19 19:39:18.555684984 +0000
 Birth: -
```




