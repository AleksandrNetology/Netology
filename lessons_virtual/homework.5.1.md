## ДЗ 5.1. "Введение в виртуализацию. Типы и функции гипервизоров. Обзор рынка вендоров и областей применения."

### Задача 1
*Опишите кратко, как вы поняли: в чем основное отличие полной (аппаратной) виртуализации, паравиртуализации и виртуализации на основе ОС.*

__Выполнение__

*Аппаратная виртуализация* - это когда на железный сервер устанавливается специализированная ОС, называемая `гипервизор` и управляющая виртуальными машинами.
Гипервизор как раз и занимается тем, что распределяет реальные ресурсы железного сервера между гостевыми ОС, которыми он управляет.
Так же гипервизору неважно какого типа гостевая ОС: windows или unix. Гостевые ОС полностью изолированы друг от друга.

*Паравиртуализация* - это когда на железный сервер устанавливает обычная ОС Windows или Linux, и уже внутри этой ОС, ставится гипервизор-сервис\демон, 
который, в свою очередь, будет управлять гостевыми ОС, *специально подготовленными* для этого. Гостевые ОС могут быть разного типа: windows или unix.

*Виртуализация на основе ОС* - на железном сервере стоит ОС которая напрямую занимается управлением гостевыми ОС. Гипервизора нет в принципе. Гостевые
ОС должны быть той же архитектуры, как и управляющая ОС.

----

### Задача 2

*Выберите один из вариантов использования организации физических серверов, в зависимости от условий использования.*

Организация серверов:

- физические сервера,
- паравиртуализация,
- виртуализация уровня ОС.

Условия использования:

- Высоконагруженная база данных, чувствительная к отказу.
- Различные web-приложения.
- Windows-системы для использования бухгалтерским отделом.
- Системы, выполняющие высокопроизводительные расчеты на GPU.

*Опишите, почему вы выбрали к каждому целевому использованию такую организацию.*

__Выполнение__

1. Из предложенных трёх вариантов для __высоконагруженной БД, чувствительной к отказу__ я бы выбрал кластер *физических серверов* т.к. у прочих вариантов будут
проблемы с производительностью - часть ресурсов железного сервера будут уходить на обработку запросов либо гипервизора с его другими гостевыми ОС в
случае паравиртуализации, либо на взаимодействие с хостовой ОС в случае виртуализация уровня ОС. Плюс сложность в поиске проблем с той же производительностью при использовании любых видов виртуализации;

2. Для варианта работы __различных web-сервисов__ вполне подойдёт *виртуализация уровня ОС* - ОС для всех гостевых будет аналогична хостовой, а значит все
web-приложения будут написаны и настроены для работы в ОС одного типа, а значит упрощается поддержка и обновления;

3. Для задачи __windows-систем для использования бухгалтерским отделом__, наверное, подойдёт как паравиртуализация, так и виртуализация уровня ОС: Hyper-V;

4. Системам, __выполняющим высокопроизводительные расчеты на GPU__ тоже больше всего подойдут непосредственно *физические сервера* - виртуализация
предложенных типов (паравиртуализация и уровня ОС) здесь только усложнит настройку и обслуживание системы.

----

### Задача 3

*Выберите подходящую систему управления виртуализацией для предложенного сценария. Детально опишите ваш выбор.*

Сценарии:

1. 100 виртуальных машин на базе Linux и Windows, общие задачи, нет особых требований. Преимущественно Windows-based инфраструктура, требуется реализация программных
балансировщиков нагрузки, репликации данных и автоматизированного механизма создания резервных копий.

2. Требуется наиболее производительное бесплатное open source решение для виртуализации небольшой (20-30 серверов) инфраструктуры на базе Linux и Windows виртуальных машин.

3. Необходимо бесплатное, максимально совместимое и производительное решение для виртуализации Windows инфраструктуры.

4. Необходимо рабочее окружение для тестирования программного продукта на нескольких дистрибутивах Linux.

__Выполнение__

1. Для первой задачи идеально подходит `VMware vCenter Server`: можно создавать гостевые ВМ с любым типом ОС, настраивать в vSphere репликации, копии и клоны ВМ.

2. Судя по описанию, для этой задачи подходит KVM: бесплатно, высокая производительность, поддерживает любой тип гостевой ОС. 

3. Здесь хорошо подойдёт Hyper-V т.к. это решение от компании Microsoft и значит для виртуализации Windows-инфраструктуры это наиболее подходящее решение.

4. Здесь, скорее всего, подойдёт виртуализация Xen: бесплатная, стабильная, поддерживает множество дистрибутивов Linux.

----


### Задача 4

*Опишите возможные проблемы и недостатки гетерогенной среды виртуализации (использования нескольких систем управления виртуализацией одновременно) и что
необходимо сделать для минимизации этих рисков и проблем. Если бы у вас был выбор, то создавали бы вы гетерогенную среду или нет? Мотивируйте ваш ответ
примерами.*

__Выполнение__

Гетерогенная среда виртуализации - это от двух различных систем виртуализации (__СВ__) в рамках одной организации.
Самая большая сложность в такой ситуации - это взаимозаменяемость сотрудников, которые работают с той или иной СВ. Для работы в гетерогенных средах
виртуализации необходимы универсалы высокого класса и найти таких гораздо сложнее, что специалистов узкого профиля, а значит нужно *дополнительно*
вкладываться в мотивирование спецов дабы минимизировать вероятность их увольнения. Либо содержать пару команд для поддержки каждой СВ в нашем зоопарке.
Это самое сложное, по-моему. А технические задачи решаются в рабочем порядке.

Зачем нужно создавать гетерогенную среду я не смог придумать. Видимо, это какие-то узкоспециализированные задачи, про которые я просто ничего не знаю.
Я бы такую никогда создавать не стал.

Только один раз в жизни мне попалась гетерогенная среда, состоящая из Hyper-V и VMware. Она создавалась на старте некого проекта двумя разными командами в
разных организациях. Организации слились в одну. Новый коллектив принял решение избавиться от дополнительных проблем, связанных с поддержкой обоих решений,
сложностями с миграцией ВМ и плавно, в течение полугода полностью избавились от Hyper-V. Остановились на VMware т.к. это универсальное решение с богатейшим
функционалом и подходящее для любых задач.

-------